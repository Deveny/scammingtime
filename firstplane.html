<!DOCTYPE html>
<html>
  <head>
    <title>01.01 - WebGLRenderer - Skeleton</title>
    <script src="js/three.js"></script>
          <script src="js/CSS3DRenderer.js"></script>
          <script src="../libs/dat.gui.min.js"></script>
    <style>
      body {
      margin: 0;
      overflow: hidden;
      }
    </style>
  </head>
  <body>
    <script>
      // global variables
      var renderer;
      var scene;
      var camera;
        
              // calls the init function when the window is done loading.
      window.onload = init;
        
            var content = '<div id="sea">' +
      '<video height="100%" width="100%" autoplay>' +
      '<source src="scheldepaars.mp4" type="video/mp4">' +
      '</video>' +
    '</div>';
          
    
    // global variables, referenced from render loop
    var renderer;
    var scene;
    var camera;
        
        
            function init() {

      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);

      // create a CSS3DRenderer
      renderer = new THREE.CSS3DRenderer();
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // position and point the camera to the center of the scene
      camera.position.x = 0;
      camera.position.y = -200;
      camera.position.z = 500;
      camera.lookAt(scene.position);

      var cssElement = createCSS3DObject(content);
      cssElement.position.set(10, -100, 100);
      scene.add(cssElement);
      cssElement.name = 'cube';
      setupKeyControls();

      render();
    }
        
        function createCSS3DObject(content) 
    {
      // convert the string to dome elements
      var wrapper = document.createElement('div');
      wrapper.innerHTML = content;
      var div = wrapper.firstChild;

      // set some values on the div to style it.
      // normally you do this directly in HTML and 
      // CSS files.
      div.style.width = '500px';
      div.style.height = '500px';
      div.style.opacity = 0.7;
      div.style.background = new THREE.Color(Math.random() * 0xffffff).getStyle();

      // create a CSS3Dobject and return it.
      var object = new THREE.CSS3DObject(div);
      return object;
    }
        
        

    function render() {
        // and render the scene
      renderer.render(scene, camera);
      requestAnimationFrame(render);    }
        
            function setupKeyControls() {
      var cube = scene.getObjectByName('cube');
      document.onkeydown = function(e) {
        switch (e.keyCode) {
          case 37:
          cube.rotation.x += 0.1;
          break;
          case 38:
          cube.rotation.z -= 0.1;
          break;
          case 39:
          cube.rotation.x -= 0.1;
          break;
          case 40:
          camera.position.x += 10;
          break;
        }
      };
    }
        
            function setupKeyLogger() {
      document.onkeydown = function(e) {
        console.log(e);
      }
    }
      </script>
  </body>
</html>