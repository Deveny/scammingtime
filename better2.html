<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="GitLab Pages">
    <title>Zoom Outer</title>
      
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
          <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.4/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.4/CSSRulePlugin.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.4/ScrollTrigger.min.js"></script>

  <link rel="stylesheet" href="firstep/first.css">
      <style>
          
@font-face {
  font-family: "round";
  src: url("/assets/fonts/ArialRoundedBold.ttf");
}

#webgl, #episode {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
    text-align: center;
    
}
          .algen,#scam{background-image:url('/assets/firstepisode/redone.png');
            background-size: 100%;
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            text-align: center;
                z-index: 1000;
              display: block;
                position: absolute;
                background-repeat: no-repeat;
              display: none;
            }
#webgl {
      overflow: hidden;
  z-index: 50;
}
          #webgl:after{
  animation: grain 8s steps(10) infinite;
  background-image: url(assets/noise2.png);
  content: "";
  height: 300%;
  left: -50%;
  opacity: 0.3;
  position: fixed;
  top: -110%;
  width: 300%;
              pointer-events: none;

          }
          @keyframes grain {
  0%, 100% { transform:translate(0, 0) }
  10% { transform:translate(-5%, -10%) }
  20% { transform:translate(-15%, 5%) }
  30% { transform:translate(7%, -25%) }
  40% { transform:translate(-5%, 25%) }
  50% { transform:translate(-15%, 10%) }
  60% { transform:translate(15%, 0%) }
  70% { transform:translate(0%, 15%) }
  80% { transform:translate(3%, 35%) }
  90% { transform:translate(-10%, 10%) }
}
          #episode{
              overflow-x: hidden;
              overflow-y: hidden;
              display: none;
              z-index: 1;
          }
body {
  margin: 0;
  background-color: white;
}

                #p-txt{
                z-index: 1;
    width: 100vw;
                height: 415vw;
                background-image: url('/assets/firstepisode/largetxt.png');
                background-size: 100%;
                position:relative;
                opacity: 0.8;
                mix-blend-mode: multiply;
                background-repeat: no-repeat;
            }
          
          
               .layed img{
                box-shadow: 0 0 20px hotpink;
      -webkit-box-shadow: 0 0 20px hotpink;
            }
            
       
            .lighted{
filter: drop-shadow(0 0 5px pink);            }
            #again{
                transform: translateX(45.6vw) translateY(262.1vw);
                                position: absolute;
                                padding:0;
                z-index: 20;
                cursor: url(/assets/firstepisode/tf.png),pointer;

            }       
            .layed{
                                padding:0;
                position: absolute;
                z-index: -10;
            }
            #a1
            {
             transform: translateY(83vw);
            }
            #a2
            {
             transform: translateY(206.5vw);
            }
            #a3{
             transform: translateY(290vw);
            }
            #video{
                transform: translateY(-50%);
                width: 100vw;
                height: 70.7vh;
                padding: 0;
                display: none;
                position: relative;
                z-index: -300;
            }
            video{
                border: 4px solid transparent;
            }
            #wipe{
                width: 100vw;
                height: 70.7vh;
               background: linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(255,255,255,1) 74%,rgba(255,255,255,0) 100%); 
                z-index: 200;
                position: absolute;
         }
            #sheets{
            position: absolute;
                transform: translateX(-100%);
            z-index: 1000;
                box-shadow: 0 0 20px lightgreen;
      -webkit-box-shadow: 0 0 20px lightgreen;
                cursor: url(/assets/firstepisode/tf.png),pointer;
                display: none;
            }
            #pp{
                background-image: url('/assets/firstepisode/pp.png');
                background-size: 100%;
                background-repeat: none;
                width: 35vw;
            height: 20vw;
            transform: translate(-50%,-50%);
                margin-top: 50vh;
                margin-left: 50vw;
                position: fixed;
                z-index: 900;
                display: none;
            cursor: url(/assets/firstepisode/tf.png),pointer;}
            #again p{
                background-color: white;
                opacity: 0.8;
                padding: 0;
                margin: 0;
                transform: scale(1,0.9);
                                font-size: 3.4vw;
                                font-weight: bold;
                color: rgba(0,166,255,1);
                -webkit-text-stroke: 1px rgba(0,166,255,1);
                letter-spacing: 0.7px;
                text-shadow: 0 0 8px pink; 
                font-kerning: normal;
              -webkit-animation: glow 1s ease-in-out infinite alternate;
  -moz-animation: glow 1s ease-in-out infinite alternate;
  animation: glow 1s ease-in-out infinite alternate;
            }
            
     @-webkit-keyframes glow {
  from {
    text-shadow: 0 0 4px pink, 0 0 5px pink, 0 0 6px pink, 0 0 17px pink;
  }
  
  to {
    text-shadow:0 0 5px hotpink, 0 0 6px hotpink, 0 0 7px hotpink, 0 0 18px hotpink;
  }
}




</style>
  </head>
  <body>
    <div class="algen" id="scam"></div>
    <div id="webgl"></div>
      <div id="episode"> <div id='pp'></div>

        <div id="again"><p>(and again)</p></div>
        <div class="layed">
                <img class="abacate" id='a1'src="/assets/firstepisode/abacate1.jpg" width='17%'><br>
                <img class="abacate" id='a2'src="/assets/firstepisode/abacate2.jpg" width='17%'><br>
                <img class="abacate" id='a3'src="/assets/firstepisode/abacate3.jpg" width='17%'></div>

                <div id="p-txt"></div>
        <div id="video">     

                     <div id='wipe'></div>

<video id='grass' width="100%" height="auto">
            <source src="/assets/firstepisode/grass.mp4" type="video/mp4"></video>
                                <img id="sheets" src="/assets/firstepisode/sheets.jpg" width="20%">
<audio id="sound">
  <source src="/assets/firstepisode/what.mp3" type="audio/mpeg">
</audio>
</div></div>
    <footer>
        
<script>
        gsap.registerPlugin(ScrollTrigger);
function hitIt(){
    $('#grass').delay(1000).get(0).play();
    $('#pp').fadeOut('500');
    document.getElementById('grass').addEventListener('ended',myHandler,false);
    function myHandler(e) {
$('#sheets').fadeIn(1000);
        gsap.to('#sheets',{duration:2,scale:1,y:20, yoyo: true, 
    repeat: -1, 
    ease: "power1.inOut"});
    }
    
}
       
        function toPoint(){
            $('body').css('background-color','white');
            $('#episode').css('overflowY','scroll');
            $('#p-txt,#video').fadeIn(800);
            $('#p-one').delay(500).fadeOut(1000, function(){
            });  
             gsap.to('video',{
                scrollTrigger:{
                    trigger:'video',
                    start: 'top center',
                    end: 'bottom 60%',
                    scrub:true,
                    toggleActions: 'restart pause resume reverse',
                onLeave:hitIt},
                duration:3,
                 transform: 'translateY(50vh)'});
        }
        $(document).ready(function(){
                            var audio = $('audio');

        var myAudio = document.getElementById("sound");

function togglePlay() {
  return myAudio.paused ? myAudio.play() : myAudio.pause();
};
            $('#again').click(function(){
                $('#pp').fadeToggle(500);
                togglePlay();
        
            });
            $('#p-txt').click(function(){
                    $('#pp').fadeOut();
                                togglePlay();

                });
            
            
            $('#pp').click(function(){
                     if(audio.paused){
                    audio.get(0).play(); 
                         mover.play();
            } else {
                    audio.get(0).pause(); 
                mover.pause();
            }
                });
            
          
            
            var mover = gsap.to('#pp',{paused: true, duration:2,scale:1,y:10, yoyo: true, 
    repeat: -1, 
    ease: "power1.inOut"});
            
            $('#pp').hover(function(){
                mover.play();
            },function(){
                mover.pause();
            })
            
            
            
            gsap.from('#a1',{
                scrollTrigger:{
                    trigger:'#a1',
                    start: 'top bottom',
                    end: 'bottom center',
                    scrub: 1,
                    toggleActions: 'restart pause resume reverse'},
                duration:3,
                scale:0.5,
                opacity:0.5,
                ease: "power1.inOut"});
            
            gsap.from('#a2',{
                scrollTrigger:{
                    trigger:'#a2',
                    start: 'top bottom',
                    end: 'bottom center',
                    scrub: 1,
                    toggleActions: 'restart pause resume reverse'},
                duration:3,
                scale:0.5,
                opacity:0.5,
                ease: "power1.inOut"});
            
            gsap.from('#a3',{
                scrollTrigger:{
                    trigger:'#a3',
                    start: 'top bottom',
                    end: 'bottom center',
                    scrub: 1,
                    toggleActions: 'restart pause resume reverse'},
                duration:3,
                scale:0.5,
                opacity:0.5,
                ease: "power1.inOut"});
            
           
            
             
        });</script>
<script>
    $(document).ready(function() {
    setTimeout(function(){
        $('.algen').fadeOut("slow");
    }, 3000);
 
});
        </script>
<script type="module">
import * as THREE from "/three/build/three.module.js";

import { TWEEN } from "/three/examples/jsm/libs/tween.module.min.js";
import { OrbitControls } from "/three/examples/jsm/controls/OrbitControls.js";

			import { GUI } from '/three/examples/jsm/libs/dat.gui.module.js';

			import { CinematicCamera } from '/three/examples/jsm/cameras/CinematicCamera.js';

//loading
const manager = new THREE.LoadingManager();
manager.onLoad = function ( ) {
//$("#scam").fadeOut();
	var loader = document.querySelector("#scam");
 var tween = new TWEEN.Tween(loader).to({
    opacity: 0
  }, 200).start();
};
//basics
var controls, camera, scene, light, renderer, domElement;

//mouse
var raycaster = new THREE.Raycaster();
var mouse = new THREE.Vector2(1,1);
   
//helix
const helix = new THREE.Object3D;
const screens= new THREE.Object3D;
var helixspeed, screen, flow, tl, movement, isRan;
var executed = false;
var control;
//andere : cleanup!!

init();
animate();

function init() {
    
  //renderer
  var container = document.querySelector("#webgl");
  document.body.appendChild( container );
  renderer = new THREE.WebGLRenderer({antialias: true,alpha: true});
  renderer.setPixelRatio( window.devicePixelRatio );
  container.prepend(renderer.domElement);
  renderer.setSize(window.innerWidth, window.innerHeight);
  //basics
  scene = new THREE.Scene();
  scene.fog = new THREE.FogExp2(0xffc494, 0.0004);
  camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight,1,15000);
  camera.position.z = 10000;
  camera.focus = 1;
     //controls
  controls = new OrbitControls(camera, renderer.domElement);
  controls.screenSpacePanning = false; 
  controls.minPolarAngle = Math.PI / 2.5;
  controls.maxPolarAngle = Math.PI / 2;
  controls.maxDistance=10000;
  controls.minDistance=-10000;
  controls.minAzimuthAngle = Math.PI;
  controls.maxAzimuthAngle = Math.PI+0.0001;
  controls.addEventListener("change", render);
    //controls.zoomSpeed = 1.5;
  //daylight
  var light = new THREE.DirectionalLight(0xfff3d4);
  light.position.set(-1, 3, 15);
  scene.add(light);
  var light = new THREE.DirectionalLight(0xff2288);
  light.position.set(-1, -1, -1);
  //scene.add(light);
  var light = new THREE.AmbientLight(0x222222);
  scene.add(light);
 //terrain
  createTerrainFromMap();
 
  var blueSpot = new THREE.PointLight();
  blueSpot.color = new THREE.Color(0x0000ff);
  blueSpot.intensity =1;
  blueSpot.distance = 1000;

  blueSpot.position.set(300, 70, 0);
  blueSpot.name = 'blue1';
  //scene.add(blueSpot);
    
    
  //addPointLight(0xff0000, new THREE.Vector3(-400, 0, 0), "red1");
  //addPointLight(0xff0000, new THREE.Vector3(-100, 0, 0), "red2");
 // addPointLight(0x0000ff, new THREE.Vector3(300, 70, 0), "blue1");
  control = new (function () {
    this.count = 0.01;
  })();
    
  //helix
  //helix = new THREE.Object3D();
  helixspeed = 0.001;
  var vector = new THREE.Vector3();
           
    helix.name = 'surething';
                
  isRan = true;
//each screen
  for (var i = 0; i < 3; i++){
        
        var superegg = new THREE.Shape();
function rounded( ctx, width, height) {
                    var radius = 8;
                    var x = - (width/2);
                    var y = - (height/2);
					ctx.moveTo( x, y + radius );
					ctx.lineTo( x, y + height - radius );
					ctx.quadraticCurveTo( x, y + height, x + radius, y + height );
					ctx.lineTo( x + width - radius, y + height );
					ctx.quadraticCurveTo( x + width, y + height, x + width, y + height - radius );
					ctx.lineTo( x + width, y + radius );
					ctx.quadraticCurveTo( x + width, y, x + width - radius, y );
					ctx.lineTo( x + radius, y );
					ctx.quadraticCurveTo( x, y, x, y + radius );
				}
      
   
   //sizes 
         if(i == 1||i==4){
             var width = 128;
             var height = 96;
var map = new THREE.TextureLoader().load("/assets/screens/sheets.jpg");
    }
else if(i == 2||i==5){
    
             var width = 96;
             var height = 128;
var map = new THREE.TextureLoader().load("/assets/screens/boobs.jpg");
}
else{
             var width = 110;
             var height = 110;
  var map = new THREE.TextureLoader().load("/assets/screens/pinkass.jpg");
}
      rounded(superegg, width, height);
      var theta = i * 2.10 + Math.PI;
      var geometry = new THREE.ShapeBufferGeometry( superegg );
            var texture = new THREE.TextureLoader().load("/assets/fake.jpg"); 
//imgside
      var material1 = new THREE.MeshBasicMaterial({
          map: map,
          side: THREE.BackSide,
          transparent: true,
          opacity:0,
          fog:false,
          polygonOffset : true,  
          polygonOffsetFactor : -0.8
      });
      map.repeat.set((1/width),(1/height));
      map.offset.y = 0.5;
      map.offset.x = 0.5;
//outside
      var material2 = new THREE.MeshBasicMaterial({
          
      side: THREE.FrontSide,
      transparent: true,
      opacity: 0.5,
     // color : new THREE.Color(0xC0C0C0),
      map :texture,
            fog : false,
      });
      texture.repeat.set((1/width),(1/height));
      texture.offset= new THREE.Vector2( 0.5, 0.5 );
//non-hovering both side
      var material3 = new THREE.MeshBasicMaterial({ 
      side: THREE.BackSide,
      transparent: true,
      opacity: 0.5,
     // color : new THREE.Color(0xC0C0C0),
      map :texture,
            fog : false,
          polygonOffset : true,  
          polygonOffsetFactor : 1
      });
            var hide = new THREE.Mesh(geometry, material3);
      var inside = new THREE.Mesh(geometry, material1);
      var outside = new THREE.Mesh(geometry, material2);

      inside.name="in";
      outside.name="out";
      hide.name="hide";
      
      hide.userData.tag="fadeout";
      inside.userData.tag="fadein";

      var screen = new THREE.Group();
      screen.name = "screen";
            screen.add(hide);
      screen.add(outside);
      screen.add(inside);

      screen.position.setFromCylindricalCoords( 200, theta, 0 );
      vector.x = screen.position.x * 2;
      vector.y = screen.position.y;
      vector.z = screen.position.z * 2;
      
//glowborder-img  
      var glowmap = new THREE.TextureLoader().load( '/assets/glow2.png' );
      glowmap.offset= new THREE.Vector2( 0.5, 0.5 );
      glowmap.repeat.set((1/width),(1/height));
var glowmaterial = new THREE.MeshBasicMaterial( { 
    color: 0xfa8072, 
    map:glowmap,
    transparent:true, 
    side: THREE.DoubleSide, 
    polygonOffset : true,  
    polygonOffsetFactor : -0.2, 
    depthWrite:false, 
    opacity:0.5});
 var glowobj = new THREE.Mesh(geometry, glowmaterial);
    glowobj.name="glow";
   //glowwtween   
      var col = new THREE.Color('#CCB3FF');
     var vol = new THREE.Color('#ffa07a');
        tl = new TimelineLite({repeat:-1, yoyo:true});
tl.fromTo(glowmaterial.color, {
  r: col.r,
  g: col.g,
  b: col.b
}, {
  r: vol.r,
  g: vol.g,
  b: vol.b,duration:2
}).fromTo(glowmaterial, {opacity:1}, {opacity:0.1,duration:1}); 
                   
      
THREE.Object3D.prototype.getObjectsByTag = function( tag, result ) {
  if ( this.userData.tag === tag ) result.push( this );
	for ( var i = 0, l = this.children.length; i < l; i ++ ) {
		var child = this.children[ i ];
    child.getObjectsByTag( tag, result );
	}
  return result;
};
      
glowobj.scale.set(1.25, 1.25, 1.25);
screen.add( glowobj );
      
      
      screen.lookAt( vector );
      screen.name = 'screen';
      screens.add( screen );
    }   
    helix.add(screens);
    helix.rotation.y =  0;
    
    //movement helix
    movement = new TimelineLite({repeat:-1, yoyo:true});
    movement.to(helix.rotation, {y:15,  ease: 
Back.
easeInOut.config(
1.7), duration:30});
    
    //cylinder
    
    	var map = new THREE.TextureLoader().load( '/assets/st-l.png' );
				map.wrapS = map.wrapT = THREE.RepeatWrapping;
                map.repeat.set( 1.25, 1 );
				var material = new THREE.MeshPhongMaterial( { 
            map: map
            , side: THREE.FrontSide
            , transparent: true
                    ,        color:  0xFCD5D5
          //  , blending: THREE.NormalBlending
          //  , depthWrite: false
          //   , depthTest:false
                } );
    var material2 = new THREE.MeshPhongMaterial( {
        map: map,
        side: THREE.BackSide,
        transparent: true,
        color:  0x2ad9c6
    });
    var object2 = new THREE.Mesh( new THREE.CylinderBufferGeometry(  245, 245, 230, 240, 25, true ), material2 );
    var object = new THREE.Mesh( new THREE.CylinderBufferGeometry( 245, 245, 230, 240, 25, true ), material );
  
                object2.position.set( 0, -5, 0 );
				object.position.set( 0, -5, 0 );
                object.name="buitenring";
                object2.name="binnenring";
    
                helix.add(object2);
				helix.add(object);
    
    scene.add( helix );
    	
 
  
  //window
  window.addEventListener("resize", onWindowResize, false);
  document.addEventListener( 'pointermove', onPointerMove, false );
  document.addEventListener( 'click', onClicker, false );
  onWindowResize();

  //postprocessing
   
	renderer.domElement.style.touchAction = 'none';
    renderer.sortObjects = false;
    renderer.renderLists.dispose();
}
    
    	function onClicker( event ) {
				event.preventDefault();

				mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
				mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;

				raycaster.setFromCamera( mouse, camera );
				var intersects = raycaster.intersectObject( screens, true );
				if ( intersects.length > 0){
                        movement.pause();
  
        var fadein = scene.getObjectsByTag('fadein',[]);

                fadein.forEach(tweenIn);
				var chosen = intersects[ 0 ].object.parent;
                var nvector = new THREE.Vector3();
                    nvector.copy(chosen.position);       
                    nvector.negate();

  if(isRan)
  {
    tweenCamera(nvector, 5000);
    isRan = false;
  }else{
    newPage();
  }                    
}
        }
        function tweenCamera(targetPosition, duration) {

  controls.enabled = false;
    
  var position = new THREE.Vector3().copy(camera.position);
  var tween = new TWEEN.Tween(position)
    .to(targetPosition, duration)
    .easing(TWEEN.Easing.Exponential.Out)
    .onUpdate(function () {
      camera.position.copy(position);
      camera.lookAt(controls.target);
    })
    .onComplete(function () {
      camera.position.copy(targetPosition);
      camera.lookAt(controls.target);
      //controls.enabled = true;
    })
    .start();
}     
        function onPointerMove( event ) {
					//if ( event.isPrimary === false ) return;
            	event.preventDefault();

					mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
					mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
				}
     function checkIntersection() {
         raycaster.setFromCamera( mouse, camera );
    
        var fadein = scene.getObjectsByTag('fadein',[]);
        var fadeout = scene.getObjectsByTag('fadeout',[]);

        var intersects = raycaster.intersectObject(screens, true );
         if (intersects.length > 0){

               // fadeout.forEach(tweenOut);
                 fadein.forEach(tweenIn);
            $('html,body').css('cursor', 'pointer');

 }else{
              // fadeout.forEach(tweenIn);
                 fadein.forEach(tweenOut);
             $('html,body').css('cursor', 'default');

         }
				}    
function tweenIn(x){
var tween = new TWEEN.Tween(x.material).to({opacity:1}, 100).start();
}
    function tweenOut(x){
    var tween = new TWEEN.Tween(x.material).to({opacity:0}, 100).start();
}
    function onMove(){
        if  (-3000 < camera.position.z && camera.position.z < 3000 && !executed){
                        executed = true;
controls.maxAzimuthAngle = 0;
controls.minAzimuthAngle = 0;
  controls.maxDistance=3000;
  controls.minDistance=-3000;
    }
    }
function createTerrainFromMap() {
    /*
        var depth = 512;
        var width = 512;

        var spacingX = 3;
        var spacingZ = 3;
        var heightOffset =-3;

        var canvas = document.createElement('canvas');
        canvas.width = 512;
        canvas.height = 512;
        var ctx = canvas.getContext('2d');

        var img = new Image();
        img.src = "../assets/water.jpg";
    */
  var depth = 712;
  var width = 712;

  var spacingX = 8;
  var spacingZ = 8;
  var heightOffset = -1;

  var canvas = document.createElement("canvas");
  canvas.width = 712;
  canvas.height = 712;
  var ctx = canvas.getContext("2d");

  var img = new Image();
  img.src = "../assets/waterLARGE.jpg";
    
  img.onload = function () {
    // draw on canvas
    ctx.drawImage(img, 0, 0);
    var pixel = ctx.getImageData(0, 0, width, depth);

    var geom = new THREE.Geometry();
    var output = [];
    for (var x = 0; x < depth; x++) {
      for (var z = 0; z < width; z++) {
        var yValue = pixel.data[z * 4 + depth * x * 4] / heightOffset;
        var vertex = new THREE.Vector3(x * spacingX, yValue, z * spacingZ);
        geom.vertices.push(vertex);
      }
    }

    // we create a rectangle between four vertices, and we do
    // that as two triangles.
    for (var z = 0; z < depth - 1; z++) {
      for (var x = 0; x < width - 1; x++) {
        // we need to point to the position in the array
        // a - - b
        // |  x  |
        // c - - d
        var a = x + z * width;
        var b = x + 1 + z * width;
        var c = x + (z + 1) * width;
        var d = x + 1 + (z + 1) * width;

        var face1 = new THREE.Face3(a, b, d);
        var face2 = new THREE.Face3(d, c, a);

        geom.faces.push(face1);
        geom.faces.push(face2);
      }
    }

    geom.computeVertexNormals(true);
    geom.computeFaceNormals();
    geom.computeBoundingBox();

    var zMax = geom.boundingBox.max.z;
    var xMax = geom.boundingBox.max.x;
      
    var huh = new THREE.TextureLoader().load( '/assets/textures/sand1.jpg' );
				//huh.wrapS = huh.wrapT = THREE.RepeatWrapping;
               // huh.repeat.set( 1, 1 );

    var mesh = new THREE.Mesh(
      geom,
      new THREE.MeshPhongMaterial({
         // map:huh,
        color: 0x2ad9c6,
        shininess: 40,
        specular: 0x161616,
          dithering:true
      })
    );
    mesh.translateX(-xMax / 2);
    mesh.translateZ(-zMax / 2);
    mesh.position.y = 0;
    mesh.name = "terra"
    scene.add(mesh);
  };
}
function addPointLight(color, position, name) {
  var pointLight = new THREE.PointLight();
  pointLight.color = new THREE.Color(color);
  pointLight.intensity =7;
  pointLight.distance = 500;
pointLight.castShadow = true;

  pointLight.position.copy(position);
  pointLight.name = name;
  scene.add(pointLight);

  var bulbMat = new THREE.MeshBasicMaterial();
  bulbMat.color = new THREE.Color(color);
  pointLight.add(new THREE.Mesh(new THREE.SphereGeometry(0.001), bulbMat));
}
function onWindowResize() {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
}
function newPage(){
        $('#webgl').fadeOut(2000).remove();
            $('body').css('background-color','white');
            $('#episode').css('overflowY','scroll');
        $('#episode, #video').fadeIn(1000, function(){
            });  
             gsap.to('video',{
                scrollTrigger:{
                    trigger:'video',
                    start: 'top center',
                    end: 'bottom 60%',
                    scrub:true,
                    toggleActions: 'restart pause resume reverse',
                onLeave:hitIt},
                duration:3,
                 transform: 'translateY(50vh)'});

    }
function animate() {
       //  helix.rotation.y -= 0.01;

    setTimeout( function() {
        requestAnimationFrame( animate );
    }, 1000 / 30 );  
    
    //controls.update();
  TWEEN.update();
 render();

onMove();
}
function render() {
     if(isRan)
  {checkIntersection();
  }else{  }                    


    
  renderer.render(scene, camera);
  var time = Date.now() * 0.00025;
  var d = 2000;
    
}
</script> </footer>
  </body>
</html>